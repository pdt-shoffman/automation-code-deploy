/* Copyright (c) 2011, Yahoo! Inc.  All rights reserved. 
 * Copyright (c) 2012, Log-Normal, Inc.  All rights reserved.
 * Copyright (c) 2014, SOASTA, Inc. All rights reserved.
 * Copyrights licensed under the BSD License. See the accompanying LICENSE.txt file for terms. */
BOOMR_start = new Date().getTime();function BOOMR_check_doc_domain(a){var b;if(!a){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window)try{BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain&&(BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain)}catch(c){BOOMR.isCrossOriginError(c)||BOOMR.addError(c,"BOOMR_check_doc_domain.domainFix")}a=document.domain}if(-1!==a.indexOf(".")){try{return void(b=window.parent.document)}catch(c){document.domain=a}try{return void(b=window.parent.document)}catch(c){a=a.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(a)}}BOOMR_start=(new Date).getTime(),BOOMR_check_doc_domain(),function(a){var b,c,d,e,f,g,h,i,j=a;a.parent!==a&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase()&&(a=a.parent,e=document.getElementById("boomr-if-as").src),d=a.document,a.BOOMR||(a.BOOMR={}),BOOMR=a.BOOMR,BOOMR.version||(BOOMR.version="0.9.20170110",BOOMR.window=a,BOOMR.boomerang_frame=j,BOOMR.plugins||(BOOMR.plugins={}),function(){try{void 0!==new a.CustomEvent("CustomEvent")&&(f=function(b,c){return new a.CustomEvent(b,c)})}catch(b){}try{!f&&d.createEvent&&d.createEvent("CustomEvent")&&(f=function(a,b){var c=d.createEvent("CustomEvent");return b=b||{cancelable:!1,bubbles:!1},c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c})}catch(b){}!f&&d.createEventObject&&(f=function(a,b){var c=d.createEventObject();return c.type=c.propertyName=a,c.detail=b.detail,c}),f||(f=function(){})}(),g=function(a,b,c){function e(){d.dispatchEvent?d.dispatchEvent(g):d.fireEvent&&d.fireEvent("onpropertychange",g)}var g=f(a,{detail:b});g&&(c?BOOMR.setImmediate(e):e())},"undefined"!=typeof document.hidden?(h="visibilityState",i="visibilitychange"):"undefined"!=typeof document.mozHidden?(h="mozVisibilityState",i="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(h="msVisibilityState",i="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(h="webkitVisibilityState",i="webkitvisibilitychange"),b={beacon_url:"https://www."+("tiaa.org"==a.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase()?"tiaa.org":"tiaa-cref.org")+"/public/text/pmt.gif",beacon_type:"AUTO",site_domain:a.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",autorun:!0,strip_query_string:!1,onloadfired:!1,handlers_attached:!1,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],before_beacon:[],onbeacon:[],xhr_load:[],click:[],form_submit:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",onbeacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},vars:{},errors:{},disabled_plugins:{},xb_handler:function(c){return function(d){var e;d||(d=a.event),d.target?e=d.target:d.srcElement&&(e=d.srcElement),3===e.nodeType&&(e=e.parentNode),e&&"OBJECT"===e.nodeName.toUpperCase()&&"application/x-shockwave-flash"===e.type||b.fireEvent(c,e)}},fireEvent:function(a,b){var c,d,e;if(a=a.toLowerCase(),this.events.hasOwnProperty(a))for(this.public_events.hasOwnProperty(a)&&g(this.public_events[a],b),e=this.events[a],c=0;c<e.length;c++)try{d=e[c],d.fn.call(d.scope,b,d.cb_data)}catch(f){BOOMR.addError(f,"fireEvent."+a+"<"+c+">")}}},c={t_lstart:null,t_start:BOOMR_start,t_end:null,t_onload:void 0,url:e,utils:{objectToString:function(a,b,c){var d,e=[];if(!a||"object"!=typeof a)return a;if(void 0===b&&(b="\n	"),c||(c=0),"[object Array]"===Object.prototype.toString.call(a)){for(d=0;d<a.length;d++)c>0&&null!==a[d]&&"object"==typeof a[d]?e.push(this.objectToString(a[d],b+("\n	"===b?"	":""),c-1)):"&"===b?e.push(encodeURIComponent(a[d])):e.push(a[d]);b=","}else for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c>0&&null!==a[d]&&"object"==typeof a[d]?e.push(encodeURIComponent(d)+"="+this.objectToString(a[d],b+("\n	"===b?"	":""),c-1)):"&"===b?e.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d])):e.push(d+"="+a[d]));return e.join(b)},getCookie:function(a){if(!a)return null;a=" "+a+"=";var b,c;return c=" "+d.cookie+";",(b=c.indexOf(a))>=0?(b+=a.length,c=c.substring(b,c.indexOf(";",b)).replace(/^"/,"").replace(/"$/,"")):null},setCookie:function(a,c,e){var f,g,h,i,j;if(!a||!b.site_domain)return BOOMR.debug("No cookie name or site domain: "+a+"/"+b.site_domain),!1;if(f=this.objectToString(c,"&"),g=a+'="'+f+'"',i=[g,"path=/","domain="+b.site_domain],e&&(j=new Date,j.setTime(j.getTime()+1e3*e),j=j.toGMTString(),i.push("expires="+j)),g.length<500){if(d.cookie=i.join("; "),h=this.getCookie(a),f===h)return!0;BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+f+"\n"+h)}else BOOMR.warn("Cookie too long: "+g.length+" "+g);return!1},getSubCookies:function(a){var b,c,d,e,f=!1,g={};if(!a)return null;if("string"!=typeof a)return BOOMR.debug("TypeError: cookie is not a string: "+typeof a),null;for(b=a.split("&"),c=0,d=b.length;d>c;c++)e=b[c].split("="),e[0]&&(e.push(""),g[decodeURIComponent(e[0])]=decodeURIComponent(e[1]),f=!0);return f?g:null},removeCookie:function(a){return this.setCookie(a,{},-86400)},cleanupURL:function(a){return a&&"[object Array]"!==Object.prototype.toString.call(a)?(a=a.replace(/[0-9]{3}-[0-9]{2}-[0-9]{4}/g,"XXX-XX-XXXX"),b.strip_query_string?a.replace(/\?.*/,"?qs-redacted"):a):""},hashQueryString:function(a,b){return a?a.match?(a.match(/^\/\//)&&(a=location.protocol+a),a.match(/^(https?|file):/)?(b&&(a=a.replace(/#.*/,"")),BOOMR.utils.MD5?a.replace(/\?([^#]*)/,function(a,b){return"?"+(b.length>10?BOOMR.utils.MD5(b):b)}):a):(BOOMR.error("Passed in URL is invalid: "+a),"")):(BOOMR.addError("TypeError: Not a string","hashQueryString",typeof a),""):a},pluginConfig:function(a,b,c,d){var e,f=0;if(!b||!b[c])return!1;for(e=0;e<d.length;e++)void 0!==b[c][d[e]]&&(a[d[e]]=b[c][d[e]],f++);return f>0},arrayFilter:function(a,b){var c=[];if("function"==typeof a.filter)c=a.filter(b);else for(var d,e=-1,f=a.length;++e<f;)d=a[e],b(d,e,a)&&(c[c.length]=d);return c},addObserver:function(a,b,c,d,e,f){function g(a){var b=!1;h.timer&&(clearTimeout(h.timer),h.timer=null),d&&(b=d.call(f,a,e),b||(d=null)),!b&&h.observer&&(h.observer.disconnect(),h.observer=null),"number"==typeof b&&b>0&&(h.timer=setTimeout(g,b))}var h={observer:null,timer:null};return window.MutationObserver&&d&&a?(h.observer=new MutationObserver(g),c&&(h.timer=setTimeout(g,h.timeout)),h.observer.observe(a,b),h):null},addListener:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},removeListener:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},pushVars:function(a,b,c){var d,e,f,g=0;for(d in b)if(b.hasOwnProperty(d))if("[object Array]"===Object.prototype.toString.call(b[d]))for(e=0;e<b[d].length;++e)g+=BOOMR.utils.pushVars(a,b[d][e],d+"["+e+"]");else f=document.createElement("input"),f.type="hidden",f.name=c?c+"["+d+"]":d,f.value=void 0===b[d]||null===b[d]?"":b[d],a.appendChild(f),g+=encodeURIComponent(f.name).length+encodeURIComponent(f.value).length+2;return g},sendData:function(a,c){function d(a){var b=document.getElementById(a);b&&b.parentNode.removeChild(b)}function e(){var b,c="boomerang_post-"+encodeURIComponent(a.action)+"-"+Math.random();try{b=document.createElement('<iframe name="'+c+'">')}catch(g){b=document.createElement("iframe")}a.action=f.shift(),b.name=b.id=c,b.style.display=a.style.display="none",b.src="javascript:false",d(b.id),d(a.id),document.body.appendChild(b);var h=b.contentWindow||b.contentDocument;h.document&&(h=h.document),h.body?h.body.appendChild(a):h.appendChild(a);try{a.submit()}catch(g){}f.length&&BOOMR.setImmediate(e),setTimeout(function(){d(b.id)},1e4)}var f=(document.createElement("input"),[b.beacon_url]);a.method=c,a.id="beacon_form",a.enctype="application/x-www-form-urlencoded",b.secondary_beacons&&b.secondary_beacons.length&&f.push.apply(f,b.secondary_beacons),e()}},init:function(c){var e,f,g=["beacon_url","beacon_type","site_domain","user_ip","strip_query_string","secondary_beacons","autorun"];if(BOOMR_check_doc_domain(),c||(c={}),c.primary&&b.handlers_attached)return this;void 0!==c.site_domain&&(this.session.domain=c.site_domain),void 0!==c.log&&(this.log=c.log),this.log||(this.log=function(){});for(f in this.plugins)if(this.plugins.hasOwnProperty(f)){if(c[f]&&c[f].hasOwnProperty("enabled")&&c[f].enabled===!1){b.disabled_plugins[f]=1,"function"==typeof this.plugins[f].disable&&this.plugins[f].disable();continue}if(b.disabled_plugins[f]){if(!c[f]||!c[f].hasOwnProperty("enabled")||c[f].enabled!==!0)continue;"function"==typeof this.plugins[f].enable&&this.plugins[f].enable(),delete b.disabled_plugins[f]}if("function"==typeof this.plugins[f].init)try{this.plugins[f].init(c)}catch(h){BOOMR.addError(h,f+".init")}}for(e=0;e<g.length;e++)void 0!==c[g[e]]&&(b[g[e]]=c[g[e]]);return b.handlers_attached?this:(b.onloadfired||void 0!==c.autorun&&c.autorun===!1||(d.readyState&&"complete"===d.readyState?(BOOMR.loadedLate=!0,this.setImmediate(BOOMR.page_ready_autorun,null,null,BOOMR)):a.onpagehide||null===a.onpagehide?BOOMR.utils.addListener(a,"pageshow",BOOMR.page_ready_autorun):BOOMR.utils.addListener(a,"load",BOOMR.page_ready_autorun)),BOOMR.utils.addListener(a,"DOMContentLoaded",function(){b.fireEvent("dom_loaded")}),function(){var c,e;for(void 0!==i&&(BOOMR.utils.addListener(d,i,function(){b.fireEvent("visibility_changed")}),BOOMR.subscribe("visibility_changed",function(){BOOMR.lastVisibilityEvent[BOOMR.visibilityState()]=BOOMR.now()})),BOOMR.utils.addListener(d,"mouseup",b.xb_handler("click")),c=d.getElementsByTagName("form"),e=0;e<c.length;e++)BOOMR.utils.addListener(c[e],"submit",b.xb_handler("form_submit"));a.onpagehide||null===a.onpagehide||BOOMR.utils.addListener(a,"unload",function(){BOOMR.window=a=null})}(),b.handlers_attached=!0,this)},page_ready_autorun:function(a){b.autorun&&BOOMR.page_ready(a)},page_ready:function(c){return c||(c=a.event),c||(c={name:"load"}),b.onloadfired?this:(b.fireEvent("page_ready",c),b.onloadfired=!0,this)},setImmediate:function(b,c,d,e){var f,g;"undefined"!=typeof Error&&(g=new Error,g=g.stack?g.stack.replace(/^Error/,"Called"):void 0),f=function(){b.call(e||null,c,d||{},g),f=null},a.setImmediate?a.setImmediate(f):a.msSetImmediate?a.msSetImmediate(f):a.webkitSetImmediate?a.webkitSetImmediate(f):a.mozSetImmediate?a.mozSetImmediate(f):setTimeout(f,10)},now:function(){try{if("performance"in window&&window.performance&&window.performance.now)return function(){return Math.round(window.performance.now()+window.performance.timing.navigationStart)}}catch(a){}return Date.now||function(){return(new Date).getTime()}}(),visibilityState:void 0===h?function(){return"visible"}:function(){return d[h]},lastVisibilityEvent:{},subscribe:function(c,d,e,f){var g,h,i;if(c=c.toLowerCase(),!b.events.hasOwnProperty(c))return this;for(i=b.events[c],g=0;g<i.length;g++)if(h=i[g],h&&h.fn===d&&h.cb_data===e&&h.scope===f)return this;return i.push({fn:d,cb_data:e||{},scope:f||null}),"page_ready"===c&&b.onloadfired&&this.setImmediate(d,null,e,f),"page_unload"!==c&&"before_unload"!==c||!function(){var g,h=i.length;g=function(g){d&&d.call(f,g||a.event,e),"page_unload"===c&&h===b.events[c].length&&BOOMR.real_sendBeacon()},"page_unload"===c&&(a.onpagehide||null===a.onpagehide?BOOMR.utils.addListener(a,"pagehide",g):BOOMR.utils.addListener(a,"unload",g)),BOOMR.utils.addListener(a,"beforeunload",g)}(),this},addError:function(a,c,d){var e;"string"!=typeof a&&(e=String(a),e.match(/^\[object/)&&(e=a.name+": "+(a.description||a.message).replace(/\r\n$/,"")),a=e),void 0!==c&&(a="["+c+":"+BOOMR.now()+"] "+a),d&&(a+=":: "+d),b.errors[a]?b.errors[a]++:b.errors[a]=1},isCrossOriginError:function(a){return"SecurityError"===a.name||"TypeError"===a.name&&"Permission denied"===a.message||"Error"===a.name&&a.message&&a.message.match(/^(Permission|Access is) denied/)},addVar:function(a,c){if("string"==typeof a)b.vars[a]=c;else if("object"==typeof a){var d,e=a;for(d in e)e.hasOwnProperty(d)&&(b.vars[d]=e[d])}return this},removeVar:function(a){var c,d;if(!arguments.length)return this;for(d=1===arguments.length&&"[object Array]"===Object.prototype.toString.apply(a)?a:arguments,c=0;c<d.length;c++)b.vars.hasOwnProperty(d[c])&&delete b.vars[d[c]];return this},hasVar:function(a){return b.vars.hasOwnProperty(a)},requestStart:function(a){var b=BOOMR.now();return BOOMR.plugins.RT.startTimer("xhr_"+a,b),{loaded:function(c){BOOMR.responseEnd(a,b,c)}}},responseEnd:function(a,c,d){"object"==typeof a&&a.url?b.fireEvent("xhr_load",a):(BOOMR.plugins.RT.startTimer("xhr_"+a,c),b.fireEvent("xhr_load",{name:"xhr_"+a,data:d}))},uninstrumentXHR:function(){},instrumentXHR:function(){},sendBeacon:function(a){return a&&(b.beacon_url=a),b.beaconQueued||(b.beaconQueued=!0,BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR)),!0},real_sendBeacon:function(){var c,e,f,g,h,i=0,j=[],k=0;if(!b.beaconQueued)return!1;b.beaconQueued=!1,BOOMR.debug("Checking if we can send beacon");for(c in this.plugins)if(this.plugins.hasOwnProperty(c)){if(b.disabled_plugins[c])continue;if(!this.plugins[c].is_complete())return BOOMR.debug("Plugin "+c+" is not complete, deferring beacon send"),!1}var l="spa"===b.vars["http.initiator"],m=l?d.URL:d.URL.replace(/#.*/,"");b.vars.pgu=BOOMR.utils.cleanupURL(m),b.vars.u&&!l||(b.vars.u=b.vars.pgu),b.vars.pgu===b.vars.u&&delete b.vars.pgu,b.vars.v=BOOMR.version,BOOMR.visibilityState()&&(b.vars["vis.st"]=BOOMR.visibilityState(),BOOMR.lastVisibilityEvent.visible&&(b.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible),BOOMR.lastVisibilityEvent.hidden&&(b.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden)),b.vars["ua.plt"]=navigator.platform,b.vars["ua.vnd"]=navigator.vendor,a!==window&&(b.vars["if"]="");for(c in b.errors)b.errors.hasOwnProperty(c)&&j.push(c+(b.errors[c]>1?" (*"+b.errors[c]+")":""));if(j.length>0&&(b.vars.errors=j.join("\n")),b.errors={},b.fireEvent("before_beacon",b.vars),BOOMR.debug("Ready to send beacon: "+BOOMR.utils.objectToString(b.vars)),!b.beacon_url)return BOOMR.debug("No beacon URL, so skipping."),!0;if(BOOMR.hasVar("restiming"))e=document.createElement("form"),i=BOOMR.utils.pushVars(e,b.vars);else{h=[];for(c in b.vars)b.vars.hasOwnProperty(c)&&(k++,h.push(encodeURIComponent(c)+"="+(void 0===b.vars[c]||null===b.vars[c]?"":encodeURIComponent(b.vars[c]))));f=b.beacon_url+(b.beacon_url.indexOf("?")>-1?"&":"?")+h.join("&")}if(b.fireEvent("onbeacon",b.vars),0===i&&0===k)return this;if(k){if(g=new Image,g.src=f,b.secondary_beacons)for(c=0;c<b.secondary_beacons.length;c++)f=b.secondary_beacons[c]+"?"+h.join("&"),g=new Image,g.src=f}else BOOMR.utils.sendData(e,"AUTO"===b.beacon_type?i>2e3?"POST":"GET":"POST");return!0}},delete BOOMR_start,BOOMR_log=!1,"number"==typeof BOOMR_lstart?(c.t_lstart=BOOMR_lstart,delete BOOMR_lstart):"number"==typeof BOOMR.window.BOOMR_lstart&&(c.t_lstart=BOOMR.window.BOOMR_lstart),"number"==typeof BOOMR.window.BOOMR_onload&&(c.t_onload=BOOMR.window.BOOMR_onload),function(){var a;"object"==typeof console&&void 0!==console.log&&(c.log=function(a,b,c){BOOMR_log&&console.log(c+": ["+b+"] "+a)}),a=function(a){return function(b,c){return this.log(b,a,"boomerang"+(c?"."+c:"")),this}},c.debug=a("debug"),c.info=a("info"),c.warn=a("warn"),c.error=a("error")}(),function(){var a;for(a in c)c.hasOwnProperty(a)&&(BOOMR[a]=c[a]);BOOMR.xhr_excludes||(BOOMR.xhr_excludes={})}(),g("onBoomerangLoaded",{BOOMR:BOOMR},!0))}(window),function(a){var b,c=a.document;BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},BOOMR.plugins.RT||(b={onloadfired:!1,unloadfired:!1,visiblefired:!1,initialized:!1,complete:!1,timers:{},cookie:"RT",cookie_exp:600,strict_referrer:!0,navigationType:0,navigationStart:void 0,responseStart:void 0,t_start:void 0,cached_t_start:void 0,t_fb_approx:void 0,r:void 0,r2:void 0,basic_timers:{t_done:1,t_resp:1,t_page:1},addedVars:[],updateCookie:function(a,b){var c,d,e,f;if(!this.cookie)return!1;if(e=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie))||{},"object"==typeof a)for(f in a)a.hasOwnProperty(f)&&(void 0===a[f]?e.hasOwnProperty(f)&&delete e[f]:("nu"!==f&&"r"!==f||(a[f]=BOOMR.utils.hashQueryString(a[f],!0)),e[f]=a[f]));return d=BOOMR.now(),b&&(e[b]=d),BOOMR.debug("Setting cookie (timer="+b+")\n"+BOOMR.utils.objectToString(e),"rt"),BOOMR.utils.setCookie(this.cookie,e,this.cookie_exp)?(c=BOOMR.now(),c-d>50&&(BOOMR.utils.removeCookie(this.cookie),BOOMR.error("took more than 50ms to set cookie... aborting: "+d+" -> "+c,"rt")),!0):(BOOMR.error("cannot set start cookie","rt"),!1)},initFromCookie:function(){var a,b;b=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie)),b&&(b.s=Math.max(+b.ld||0,Math.max(+b.ul||0,+b.cl||0)),BOOMR.debug("Read from cookie "+BOOMR.utils.objectToString(b),"rt"),b.s&&(b.r||b.nu)&&(this.r=b.r,a=BOOMR.utils.hashQueryString(c.URL,!0),BOOMR.debug(this.r+" =?= "+this.r2,"rt"),BOOMR.debug(b.s+" <? "+(+b.cl+15),"rt"),BOOMR.debug(b.nu+" =?= "+a,"rt"),!this.strict_referrer||b.nu&&b.nu===a&&b.s<+b.cl+15||b.s===+b.ul&&this.r===this.r2?(this.t_start=b.s,+b.hd>b.s&&(this.t_fb_approx=parseInt(b.hd,10))):this.t_start=this.t_fb_approx=void 0),this.updateCookie({s:void 0,r:void 0,nu:void 0,ul:void 0,cl:void 0,hd:void 0}))},getBoomerangTimings:function(){function a(a,b){var c=Math.round(a?a:0),d=Math.round(b?b:0);return c=0===c?0:c-d,c?c:""}var c,d,e,f,g;BOOMR.t_start&&(BOOMR.plugins.RT.startTimer("boomerang",BOOMR.t_start),BOOMR.plugins.RT.endTimer("boomerang",BOOMR.t_end),BOOMR.plugins.RT.endTimer("boomr_fb",BOOMR.t_start),BOOMR.t_lstart&&(BOOMR.plugins.RT.endTimer("boomr_ld",BOOMR.t_lstart),BOOMR.plugins.RT.setTimer("boomr_lat",BOOMR.t_start-BOOMR.t_lstart)));try{if(window.performance&&window.performance.getEntriesByName){d={"rt.bmr":BOOMR.url};for(e in d)if(d.hasOwnProperty(e)&&d[e]){if(c=window.performance.getEntriesByName(d[e]),!c||0===c.length)continue;c=c[0],f=a(c.startTime,0),g=[f,a(c.responseEnd,f),a(c.responseStart,f),a(c.requestStart,f),a(c.connectEnd,f),a(c.secureConnectionStart,f),a(c.connectStart,f),a(c.domainLookupEnd,f),a(c.domainLookupStart,f),a(c.redirectEnd,f),a(c.redirectStart,f)].join(",").replace(/,+$/,""),BOOMR.addVar(e,g),b.addedVars.push(e)}}}catch(h){BOOMR.addError(h,"rt.getBoomerangTimings")}},checkPreRender:function(){return"prerender"!==BOOMR.visibilityState()?!1:(BOOMR.plugins.RT.startTimer("t_load",this.navigationStart),BOOMR.plugins.RT.endTimer("t_load"),BOOMR.plugins.RT.startTimer("t_prerender",this.navigationStart),BOOMR.plugins.RT.startTimer("t_postrender"),!0)},initFromNavTiming:function(){var b,c,d;this.navigationStart||(c=a.performance||a.msPerformance||a.webkitPerformance||a.mozPerformance,c&&c.navigation&&(this.navigationType=c.navigation.type),c&&c.timing?b=c.timing:a.chrome&&a.chrome.csi&&a.chrome.csi().startE?(b={navigationStart:a.chrome.csi().startE},d="csi"):a.gtbExternal&&a.gtbExternal.startE()&&(b={navigationStart:a.gtbExternal.startE()},d="gtb"),b?(BOOMR.addVar("rt.start",d||"navigation"),this.navigationStart=b.navigationStart||b.fetchStart||void 0,this.responseStart=b.responseStart||void 0,navigator.userAgent.match(/Firefox\/[78]\./)&&(this.navigationStart=b.unloadEventStart||b.fetchStart||void 0)):BOOMR.warn("This browser doesn't support the WebTiming API","rt"))},validateLoadTimestamp:function(b,c,d){if(c&&c.timing&&c.timing.loadEventEnd)return c.timing.loadEventEnd;if(!("xhr"!==d||c&&"spa"===c.initiator))return b;if(BOOMR.loadedLate){if(!a.performance||!a.performance.timing)return BOOMR.t_onload||BOOMR.t_lstart||BOOMR.t_start||b;if(a.performance.timing.loadEventStart&&a.performance.timing.loadEventStart<BOOMR.t_end)return a.performance.timing.loadEventStart}return b},setPageLoadTimers:function(a,c,d){var e;return"xhr"!==a&&(b.initFromCookie(),b.initFromNavTiming(),b.checkPreRender())?!1:("xhr"===a?d&&d.timing&&(e=d.timing.responseStart):b.responseStart?e=b.responseStart:b.timers.hasOwnProperty("t_page")?BOOMR.plugins.RT.endTimer("t_page"):b.t_fb_approx&&(e=b.t_fb_approx),e&&(BOOMR.plugins.RT.endTimer("t_resp",e),b.timers.t_load?BOOMR.plugins.RT.setTimer("t_page",b.timers.t_load.end-e):BOOMR.plugins.RT.setTimer("t_page",c-e)),b.timers.hasOwnProperty("t_postrender")&&(BOOMR.plugins.RT.endTimer("t_postrender"),BOOMR.plugins.RT.endTimer("t_prerender")),!0)},setSupportingTimestamps:function(a){a&&BOOMR.addVar("rt.tstart",a),"number"==typeof b.t_start&&b.t_start!==a&&BOOMR.addVar("rt.cstart",b.t_start),BOOMR.addVar("rt.bstart",BOOMR.t_start),BOOMR.t_lstart&&BOOMR.addVar("rt.blstart",BOOMR.t_lstart),BOOMR.addVar("rt.end",b.timers.t_done.end)},determineTStart:function(a,c){var d;return"xhr"===a?(c&&c.name&&b.timers[c.name]?d=b.timers[c.name].start:c&&c.timing&&c.timing.requestStart&&(d=c.timing.requestStart),"undefined"==typeof d&&c&&"spa"===c.initiator?BOOMR.addVar("rt.start","none"):BOOMR.addVar("rt.start","manual")):b.navigationStart?d=b.navigationStart:b.t_start&&2!==b.navigationType?(d=b.t_start,BOOMR.addVar("rt.start","cookie")):b.cached_t_start?d=b.cached_t_start:(BOOMR.addVar("rt.start","none"),d=void 0),BOOMR.debug("Got start time: "+d,"rt"),b.cached_t_start=d,d},page_ready:function(){this.onloadfired=!0},check_visibility:function(){"visible"===BOOMR.visibilityState()&&(b.visiblefired=!0),"prerender"===b.visibilityState&&"prerender"!==BOOMR.visibilityState()&&BOOMR.plugins.RT.done(null,"visible"),b.visibilityState=BOOMR.visibilityState()},page_unload:function(a){BOOMR.debug("Unload called with "+BOOMR.utils.objectToString(a)+" when unloadfired = "+this.unloadfired,"rt"),this.unloadfired||BOOMR.plugins.RT.done(a,"unload"),this.updateCookie({r:c.URL},"beforeunload"===a.type?"ul":"hd"),this.unloadfired=!0},_iterable_click:function(a,c,d,e){var f;if(d){for(BOOMR.debug(a+" called with "+d.nodeName,"rt");d&&d.nodeName.toUpperCase()!==c;)d=d.parentNode;d&&d.nodeName.toUpperCase()===c&&(BOOMR.debug("passing through","rt"),f=e(d),this.updateCookie({nu:f},"cl"),BOOMR.addVar("nu",BOOMR.utils.cleanupURL(f)),b.addedVars.push("nu"))}},onclick:function(a){b._iterable_click("Click","A",a,function(a){return a.href})},onsubmit:function(a){b._iterable_click("Submit","FORM",a,function(a){var b=a.getAttribute("action")||c.URL||"";return b.match(/\?/)?b:b+"?"})},domloaded:function(){BOOMR.plugins.RT.endTimer("t_domloaded")},clear:function(){b.addedVars&&b.addedVars.length>0&&(BOOMR.removeVar(b.addedVars),b.addedVars=[])}},BOOMR.plugins.RT={init:function(d){return BOOMR.debug("init RT","rt"),a!==BOOMR.window&&(a=BOOMR.window),c=a.document,BOOMR.utils.pluginConfig(b,d,"RT",["cookie","cookie_exp","strict_referrer"]),b.r=b.r2=BOOMR.utils.hashQueryString(c.referrer,!0),b.initFromCookie(),b.getBoomerangTimings(),b.initialized?this:(b.complete=!1,b.timers={},b.check_visibility(),BOOMR.subscribe("page_ready",b.page_ready,null,b),BOOMR.subscribe("visibility_changed",b.check_visibility,null,b),BOOMR.subscribe("page_ready",this.done,"load",this),BOOMR.subscribe("xhr_load",this.done,"xhr",this),BOOMR.subscribe("dom_loaded",b.domloaded,null,b),BOOMR.subscribe("page_unload",b.page_unload,null,b),BOOMR.subscribe("click",b.onclick,null,b),BOOMR.subscribe("form_submit",b.onsubmit,null,b),BOOMR.subscribe("before_beacon",this.addTimersToBeacon,"beacon",this),BOOMR.subscribe("onbeacon",b.clear,null,b),b.initialized=!0,this)},startTimer:function(a,c){return a&&("t_page"===a&&this.endTimer("t_resp",c),b.timers[a]={start:"number"==typeof c?c:BOOMR.now()}),this},endTimer:function(a,c){return a&&(b.timers[a]=b.timers[a]||{},void 0===b.timers[a].end&&(b.timers[a].end="number"==typeof c?c:BOOMR.now())),this},setTimer:function(a,c){return a&&(b.timers[a]={delta:c}),this},addTimersToBeacon:function(a,c){var d,e,f=[];for(d in b.timers)if(b.timers.hasOwnProperty(d)){if(e=b.timers[d],"number"!=typeof e.delta&&("number"!=typeof e.start&&(e.start=b.cached_t_start),e.delta=e.end-e.start),isNaN(e.delta))continue;b.basic_timers.hasOwnProperty(d)?(BOOMR.addVar(d,e.delta),b.addedVars.push(d)):f.push(d+"|"+e.delta)}f.length&&(BOOMR.addVar("t_other",f.join(",")),b.addedVars.push("t_other")),"beacon"===c&&(b.timers={},b.complete=!1)},done:function(a,c){try{BOOMR.debug("Called done with "+BOOMR.utils.objectToString(a,void 0,1)+", "+c,"rt")}catch(d){BOOMR.debug("Called done with "+d+", "+c,"rt")}var e,f,g=BOOMR.now(),h=!1;return b.complete=!1,f=b.validateLoadTimestamp(g,a,c),"load"!==c&&"visible"!==c&&"xhr"!==c||b.setPageLoadTimers(c,f,a)?(e=b.determineTStart(c,a),this.endTimer("t_done",f),BOOMR.removeVar("t_done","t_page","t_resp","t_postrender","t_prerender","t_load","t_other","r","r2","rt.tstart","rt.cstart","rt.bstart","rt.end","rt.subres","rt.abld","http.errno","http.method","xhr.sync"),b.setSupportingTimestamps(e),this.addTimersToBeacon(),BOOMR.addVar("r",BOOMR.utils.cleanupURL(b.r)),b.r2!==b.r&&BOOMR.addVar("r2",BOOMR.utils.cleanupURL(b.r2)),"xhr"===c&&a&&a&&a.data&&(a=a.data),"xhr"===c&&a&&(h=a.subresource,a.url&&(BOOMR.addVar("u",BOOMR.utils.cleanupURL(a.url.replace(/#.*/,""))),b.addedVars.push("u")),a.status&&(a.status<-1||a.status>=400)&&BOOMR.addVar("http.errno",a.status),a.method&&"GET"!==a.method&&BOOMR.addVar("http.method",a.method),a.headers&&BOOMR.addVar("http.hdr",a.headers),a.synchronous&&BOOMR.addVar("xhr.sync",1),a.initiator&&BOOMR.addVar("http.initiator",a.initiator),b.addedVars.push("http.errno","http.method","http.hdr","xhr.sync","http.initiator")),h&&"passive"!==h&&(BOOMR.addVar("rt.subres",1),b.addedVars.push("rt.subres")),b.updateCookie(),"unload"===c&&(BOOMR.addVar("rt.quit",""),b.onloadfired||BOOMR.addVar("rt.abld",""),b.visiblefired||BOOMR.addVar("rt.ntvu","")),b.complete=!0,BOOMR.sendBeacon(),this):this},is_complete:function(){return b.complete},navigationStart:function(){return b.navigationStart||b.initFromNavTiming(),b.navigationStart}})}(window),function(){if(BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.NavigationTiming){var a={complete:!1,xhr_done:function(b){var c,d,e=BOOMR.window,f={};if(b){if(b.data&&(b=b.data),b.url&&e.performance&&e.performance.getEntriesByName&&(c=e.performance.getEntriesByName(b.url),c&&c.length>0)){c=c[0],f={nt_red_st:c.redirectStart,nt_red_end:c.redirectEnd,nt_fet_st:c.fetchStart,nt_dns_st:c.domainLookupStart,nt_dns_end:c.domainLookupEnd,nt_con_st:c.connectStart,nt_con_end:c.connectEnd,nt_req_st:c.requestStart,nt_res_st:c.responseStart,nt_res_end:c.responseEnd},c.secureConnectionStart&&(f.nt_ssl_st=c.secureConnectionStart);for(d in f)f.hasOwnProperty(d)&&f[d]&&(f[d]+=e.performance.timing.navigationStart)}b.timing&&(c=b.timing,f.nt_req_st||(f.nt_req_st=c.requestStart),f.nt_res_st||(f.nt_res_st=c.responseStart),f.nt_res_end||(f.nt_res_end=c.responseEnd),f.nt_domint=c.domInteractive,f.nt_domcomp=c.domComplete,f.nt_load_st=c.loadEventEnd,f.nt_load_end=c.loadEventEnd);for(d in f)f.hasOwnProperty(d)&&!f[d]&&delete f[d];BOOMR.addVar(f);try{a.addedVars.push.apply(a.addedVars,Object.keys(f))}catch(g){}this.complete=!0,BOOMR.sendBeacon()}},done:function(){var b,c,d,e,f=BOOMR.window;if(this.complete)return this;if(a.addedVars=[],b=f.performance||f.msPerformance||f.webkitPerformance||f.mozPerformance,b&&b.timing&&b.navigation){BOOMR.info("This user agent supports NavigationTiming.","nt"),c=b.navigation,d=b.timing,e={nt_red_cnt:c.redirectCount,nt_nav_type:c.type,nt_nav_st:d.navigationStart,nt_red_st:d.redirectStart,nt_red_end:d.redirectEnd,nt_fet_st:d.fetchStart,nt_dns_st:d.domainLookupStart,nt_dns_end:d.domainLookupEnd,nt_con_st:d.connectStart,nt_con_end:d.connectEnd,nt_req_st:d.requestStart,nt_res_st:d.responseStart,nt_res_end:d.responseEnd,nt_domloading:d.domLoading,nt_domint:d.domInteractive,nt_domcontloaded_st:d.domContentLoadedEventStart,nt_domcontloaded_end:d.domContentLoadedEventEnd,nt_domcomp:d.domComplete,nt_load_st:d.loadEventStart,nt_load_end:d.loadEventEnd,nt_unload_st:d.unloadEventStart,nt_unload_end:d.unloadEventEnd},d.secureConnectionStart&&(e.nt_ssl_st=d.secureConnectionStart),d.msFirstPaint&&(e.nt_first_paint=d.msFirstPaint),BOOMR.addVar(e);try{a.addedVars.push.apply(a.addedVars,Object.keys(e))}catch(g){}}if(f.chrome&&f.chrome.loadTimes&&(d=f.chrome.loadTimes())){e={nt_spdy:d.wasFetchedViaSpdy?1:0,nt_cinf:d.connectionInfo,nt_first_paint:d.firstPaintTime},BOOMR.addVar(e);try{a.addedVars.push.apply(a.addedVars,Object.keys(e))}catch(g){}}this.complete=!0,BOOMR.sendBeacon()},clear:function(){a.addedVars&&a.addedVars.length>0&&(BOOMR.removeVar(a.addedVars),a.addedVars=[]),this.complete=!1}};BOOMR.plugins.NavigationTiming={init:function(){return a.initialized||(BOOMR.subscribe("page_ready",a.done,null,a),BOOMR.subscribe("xhr_load",a.xhr_done,null,a),BOOMR.subscribe("before_unload",a.done,null,a),BOOMR.subscribe("onbeacon",a.clear,null,a),a.initialized=!0),this},is_complete:function(){return!0}}}}(),function(){function a(a){function b(b){BOOMR.debug(a.$id+": "+b,"angular")}return"undefined"==typeof a?!1:BOOMR.plugins.AutoXHR&&BOOMR.plugins.SPA?(b("Startup"),a.$on("$routeChangeStart",function(a,e,f){return c?(b("$routeChangeStart: "+(e?e.templateUrl:"")),void BOOMR.plugins.SPA.route_change(a,e,f)):void(d=!0)}),a.$on("$locationChangeStart",function(a,d){c&&(b("$locationChangeStart: "+d),BOOMR.plugins.SPA.last_location(d))}),a.$on("$stateChangeStart",function(a,e,f,g,h){return c?(b("$stateChangeStart: "+e),void BOOMR.plugins.SPA.route_change(a,e,f,g,h)):void(d=!0)}),a.$on("$stateChangeSuccess",function(a,d,e,f,g){if(c){var h=window.location.pathname+window.location.search;b("$stateChangeSuccess: "+h),BOOMR.plugins.SPA.last_location(h)}}),!0):!1}var b=!1,c=!0,d=!1;BOOMR.plugins.Angular||"undefined"==typeof BOOMR.plugins.SPA||(BOOMR.plugins.SPA.register("Angular"),BOOMR.plugins.Angular={is_complete:function(){return!0},hook:function(c,d,e){return b?this:(a(c)&&(BOOMR.plugins.SPA.hook(d,e),b=!0),this)},disable:function(){return c=!1,this},enable:function(){return c=!0,b&&d&&(d=!1,BOOMR.plugins.SPA.route_change()),this}})}(BOOMR.window);